GregSommerville/machine-learning-blackjack-solution

-

   ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-eye v-align-text-bottom js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='27'%3e%3cpath fill-rule='evenodd' d='M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z' data-evernote-id='581' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) Watch

 [0](https://github.com/GregSommerville/machine-learning-blackjack-solution/watchers)

- [3](https://github.com/GregSommerville/machine-learning-blackjack-solution/stargazers)

- ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-repo-forked v-align-text-bottom js-evernote-checked' viewBox='0 0 10 16' version='1.1' width='10' height='16' aria-hidden='true' data-evernote-id='38'%3e%3cpath fill-rule='evenodd' d='M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z' data-evernote-id='617' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) Fork

 [0](https://github.com/GregSommerville/machine-learning-blackjack-solution/network/members)

#   ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-repo js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' aria-hidden='true' data-evernote-id='40'%3e%3cpath fill-rule='evenodd' d='M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z' data-evernote-id='625' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)  [GregSommerville](https://github.com/GregSommerville)/**[machine-learning-blackjack-solution](https://github.com/GregSommerville/machine-learning-blackjack-solution)**

   [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-code js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' aria-hidden='true' data-evernote-id='41'%3e%3cpath fill-rule='evenodd' d='M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z' data-evernote-id='629' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Code](https://github.com/GregSommerville/machine-learning-blackjack-solution)      [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-issue-opened js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' aria-hidden='true' data-evernote-id='42'%3e%3cpath fill-rule='evenodd' d='M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z' data-evernote-id='633' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Issues0](https://github.com/GregSommerville/machine-learning-blackjack-solution/issues)      [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-git-pull-request js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' aria-hidden='true' data-evernote-id='43'%3e%3cpath fill-rule='evenodd' d='M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z' data-evernote-id='638' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Pull requests0](https://github.com/GregSommerville/machine-learning-blackjack-solution/pulls)    [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-project js-evernote-checked' viewBox='0 0 15 16' version='1.1' width='15' height='16' aria-hidden='true' data-evernote-id='44'%3e%3cpath fill-rule='evenodd' d='M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z' data-evernote-id='642' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Projects0](https://github.com/GregSommerville/machine-learning-blackjack-solution/projects)  [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-book js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='45'%3e%3cpath fill-rule='evenodd' d='M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z' data-evernote-id='644' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Wiki](https://github.com/GregSommerville/machine-learning-blackjack-solution/wiki)  [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-graph js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='46'%3e%3cpath fill-rule='evenodd' d='M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z' data-evernote-id='645' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Insights](https://github.com/GregSommerville/machine-learning-blackjack-solution/pulse)

  Finding an optimal Blackjack strategy using AI

 [blackjack](https://github.com/topics/blackjack)  [machine-learning](https://github.com/topics/machine-learning)  [genetic-algorithm](https://github.com/topics/genetic-algorithm)  [evolutionary-algorithms](https://github.com/topics/evolutionary-algorithms)  [csharp](https://github.com/topics/csharp)  [wpf](https://github.com/topics/wpf)  [artificial-intelligence](https://github.com/topics/artificial-intelligence)  [ai](https://github.com/topics/ai)  [game](https://github.com/topics/game)

- [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-history js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' aria-hidden='true' data-evernote-id='47'%3e%3cpath fill-rule='evenodd' d='M8 13H6V6h5v2H8v5zM7 1C4.81 1 2.87 2.02 1.59 3.59L0 2v4h4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7s7-3.14 7-7-3.14-7-7-7z' data-evernote-id='658' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) 42  commits](https://github.com/GregSommerville/machine-learning-blackjack-solution/commits/master)

- [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-git-branch js-evernote-checked' viewBox='0 0 10 16' version='1.1' width='10' height='16' aria-hidden='true' data-evernote-id='48'%3e%3cpath fill-rule='evenodd' d='M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z' data-evernote-id='661' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) 1  branch](https://github.com/GregSommerville/machine-learning-blackjack-solution/branches)

- [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-tag js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' aria-hidden='true' data-evernote-id='49'%3e%3cpath fill-rule='evenodd' d='M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 0 0 0-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z' data-evernote-id='664' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) 0  releases](https://github.com/GregSommerville/machine-learning-blackjack-solution/releases)

- [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-organization js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='50'%3e%3cpath fill-rule='evenodd' d='M16 12.999c0 .439-.45 1-1 1H7.995c-.539 0-.994-.447-.995-.999H1c-.54 0-1-.561-1-1 0-2.634 3-4 3-4s.229-.409 0-1c-.841-.621-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.442.58 2.5 3c.058 2.41-.159 2.379-1 3-.229.59 0 1 0 1s1.549.711 2.42 2.088C9.196 9.369 10 8.999 10 8.999s.229-.409 0-1c-.841-.62-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.437.581 2.495 3c.059 2.41-.158 2.38-1 3-.229.59 0 1 0 1s3.005 1.366 3.005 4z' data-evernote-id='667' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) 1  contributor](https://github.com/GregSommerville/machine-learning-blackjack-solution/graphs/contributors)

- [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-law js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' aria-hidden='true' data-evernote-id='51'%3e%3cpath fill-rule='evenodd' d='M7 4c-.83 0-1.5-.67-1.5-1.5S6.17 1 7 1s1.5.67 1.5 1.5S7.83 4 7 4zm7 6c0 1.11-.89 2-2 2h-1c-1.11 0-2-.89-2-2l2-4h-1c-.55 0-1-.45-1-1H8v8c.42 0 1 .45 1 1h1c.42 0 1 .45 1 1H3c0-.55.58-1 1-1h1c0-.55.58-1 1-1h.03L6 5H5c0 .55-.45 1-1 1H3l2 4c0 1.11-.89 2-2 2H2c-1.11 0-2-.89-2-2l2-4H1V5h3c0-.55.45-1 1-1h4c.55 0 1 .45 1 1h3v1h-1l2 4zM2.5 7L1 10h3L2.5 7zM13 10l-1.5-3-1.5 3h3z' data-evernote-id='670' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)Apache-2.0](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/License.md)

1.   [  C#  100.0%](https://github.com/GregSommerville/machine-learning-blackjack-solution/search?l=c%23)

 *Branch:*  master

 [New pull request](https://github.com/GregSommerville/machine-learning-blackjack-solution/pull/new/master)

 [Upload files](https://github.com/GregSommerville/machine-learning-blackjack-solution/upload/master)  [Find file](https://github.com/GregSommerville/machine-learning-blackjack-solution/find/master)

Clone or download

 [![35498440](../_resources/451cae8c43729ab42d9c86d21f2fdd94.jpg)](https://github.com/GregSommerville)

 [GregSommervilleView all commits by GregSommerville](https://github.com/GregSommerville/machine-learning-blackjack-solution/commits?author=GregSommerville)  [Typos, added link to article](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/06ef6ae94fb1392ffd9b94732ac94066741f4f8f)

Latest commit [06ef6ae](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/06ef6ae94fb1392ffd9b94732ac94066741f4f8f)  a day ago

| Type | Name | Latest commit message | Commit time |
| --- | --- | --- | --- |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='directory' class='octicon octicon-file-directory js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' role='img' data-evernote-id='58'%3e%3cpath fill-rule='evenodd' d='M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z' data-evernote-id='761' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [Models](https://github.com/GregSommerville/machine-learning-blackjack-solution/tree/master/Models) |    [Better default values](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f273c08a62019dd539ca37a212824da8acd944d8) |  6 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='directory' class='octicon octicon-file-directory js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' role='img' data-evernote-id='59'%3e%3cpath fill-rule='evenodd' d='M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z' data-evernote-id='771' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [Properties](https://github.com/GregSommerville/machine-learning-blackjack-solution/tree/master/Properties) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='directory' class='octicon octicon-file-directory js-evernote-checked' viewBox='0 0 14 16' version='1.1' width='14' height='16' role='img' data-evernote-id='60'%3e%3cpath fill-rule='evenodd' d='M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z' data-evernote-id='781' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [images](https://github.com/GregSommerville/machine-learning-blackjack-solution/tree/master/images) |    [Generation animation added](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/e5f6194d09af2f55aeea467802052531fcfe8197) |  3 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='61'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='791' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [.gitattributes](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/.gitattributes) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='62'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='801' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [.gitignore](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/.gitignore) |    [Corrected license and ignore files](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/6010abd8d84fd904b17bf0cc454a5cb3cda8f8f3) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='63'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='811' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [App.config](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/App.config) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='64'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='821' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [App.xaml](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/App.xaml) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='65'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='831' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [App.xaml.cs](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/App.xaml.cs) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='66'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='841' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [BlackjackStrategy.csproj](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/BlackjackStrategy.csproj) |    [Refactoring to simplify some things](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/ff89abaf8867f1f0e9005f3f26dfd9b754356f81) |  10 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='67'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='851' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [BlackjackStrategy.sln](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/BlackjackStrategy.sln) |    [More performance work](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/06062a4f37a1cc8bf26cc91446817d1990f073bc) |  11 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='68'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='861' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [Contributing.md](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/Contributing.md) |    [Refactored card classes, more basic structure](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/7d1e08a74426ec09fe1dbe3be72e6c0ecd023414) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='69'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='871' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [License.md](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/License.md) |    [Corrected license and ignore files](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/6010abd8d84fd904b17bf0cc454a5cb3cda8f8f3) |  a month ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='70'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='881' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [MainWindow.xaml](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/MainWindow.xaml) |    [More refactoring to use parallelism and code cleaner](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/d52294f69b41bd9f5009a9fddd31a734a64b1856) |  13 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='71'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='891' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [MainWindow.xaml.cs](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/MainWindow.xaml.cs) |    [More performance work](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/06062a4f37a1cc8bf26cc91446817d1990f073bc) |  11 days ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='72'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='901' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [Readme.md](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/Readme.md) |    [Typos, added link to article](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/06ef6ae94fb1392ffd9b94732ac94066741f4f8f) |  a day ago |
|  ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' aria-label='file' class='octicon octicon-file js-evernote-checked' viewBox='0 0 12 16' version='1.1' width='12' height='16' role='img' data-evernote-id='73'%3e%3cpath fill-rule='evenodd' d='M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z' data-evernote-id='911' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) |  [packages.config](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/packages.config) |    [Initial commit](https://github.com/GregSommerville/machine-learning-blackjack-solution/commit/f1631d1e38d64475996c4429c286738c82deac9d) |  a month ago |

###   ![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-book js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='74'%3e%3cpath fill-rule='evenodd' d='M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z' data-evernote-id='922' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e) Readme.md

# [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='75'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='924' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#machine-learning-blackjack-solution)machine-learning-blackjack-solution

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='76'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='926' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#introduction)Introduction

A *genetic algorithm* is a type of artificial intelligence programming that uses ideas from evolution to solve complex problems.

It works by creating a population of (initially random) candidate solutions, then repeatedly selecting pairs of candidates and combining their solutions using a process similar to genetic crossover. Sometimes candidate solutions even go through mutation, just to introduce new possibilities into the population.

After a large number of generations, the best solution found up to that point is often the optimal, best solution possible.

Genetic algorithms are particularly well-suited for combinatorial problems, where there are huge numbers of potential solutions to a problem. The evolutionary process they go through is, in essence, a search through a huge solution space. A solution space so large that you simply could never use a brute force approach.

This project is a demonstration of using a genetic algorithm to find an optimal strategy for playing the casino game [Blackjack](https://en.wikipedia.org/wiki/Blackjack).

Please see [this article](https://towardsdatascience.com/winning-blackjack-using-machine-learning-681d924f197c) for a story about how this program was used, and what the results were. The article describes some of the available settings, and shows how different values for those settings affect the final result.

The source code is for a Windows application written in C# that allows you to play with different settings like population size, selection style and mutation rate. Each generation's best solution is displayed, so you can watch the program literally evolve a solution.

[![screenshot1.png](../_resources/e9415fb44dad5d47a552942d88e55208.png)](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/images/screenshot1.png)

The property grid located at the upper left of the screen is where you adjust settings. There's an informational area below that, and the right side of the screen is the display area for the three tables that represent a strategy for playing Blackjack.

The tall table on the left is for *hard hands*, the table in the upper right is for *soft hands*, and the table in the lower right is for *pairs*. We'll talk more about how to interpret this strategy in a bit.

The columns along the tops of the three tables are for the dealer upcard. When you play Blackjack the dealer has one of his two cards initially turned face up, and the rank of that card has a big impact on recommended strategy.

Notice that the upcard ranks don't include Jack, Queen or King. That's because those cards all count 10, so we group them and the Ten together and simplify the tables.

To use the tables, first, determine if you have a pair, soft hand, or hard hand. Then look in the appropriate table, with the correct dealer upcard column. The cell in the table will be "H" when the correct strategy is to hit, "S" when the correct strategy is to stand, "D" for double-down, and (in the pairs table only) "P" for split.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='77'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='946' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#a-word-about-this-optimal-strategy)A Word About This "Optimal" Strategy

Before we go any further, it needs to be stated that this problem of finding an optimal Blackjack strategy has already been solved.

Back in the 1960s, a mathematician named [Edward O. Thorp](https://en.wikipedia.org/wiki/Edward_O._Thorp) authored a book called *Beat the Dealer*, which included charts showing the optimal "Basic" strategy. That strategy looks like this:

[![optimal.png](../_resources/4fef1d4a5b6944ffa957151ed9b408b9.png)](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/images/optimal.png)

So we're solving a problem that has already been solved, but that's actually good. That means we can compare our results to the known best solution. For example, if our result strategy tells us to do anything but stand when holding a pair of Tens, Jacks, Queens or Kings, we know there's a problem.

There's one other thing to get out of the way before we go any further, and that's the idea of *nondeterministic code*. That means that if we run the same code twice in a row, we're likely to get two different results.

That's something that happens with genetic algorithms due to their inherent randomness. There's no guarantee you'll find the absolute optimal solution, but it is assured that you will find *an* optimal or near-optimal solution. It's something that isn't typical when writing code, so it takes some adjustment for most programmers.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='78'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='958' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#genetic-algorithms)Genetic Algorithms

Now let's talk about the details of a genetic algorithm.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='79'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='961' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#fitness-scores)Fitness Scores

First of all, we need a way to evaluate candidates so we can compare them to each other. That means a numeric *fitness score*, which in this case is quite simple: you simulate playing a certain number of hands using the strategy, and then count the number of chips you have at the end.

The big question is, how many hands should we test with? The challenge of trying to test a strategy is that due to the innate randomness of Blackjack, you could use the same strategy ten times and get ten completely different results.

Obviously, the more hands you play, the more the randomness gets smoothed out, and the quality of the underlying strategy starts to emerge. If you doubt this, just think about flipping a coin. If you only flip it five times, there's certainly a possibility that it'll come up heads all five times (in fact, that happens just over 3% of the time). However, if you flip it 500 times, there's no way it's going to end up all heads - the odds of it happening are 0.5500, which works out to be roughly once every 3 x 10150 times you try it.

After some testing and analysis, it was determined that a minimum of 100,000 hands per test is needed for a reasonable level of accuracy. There's still variance even at that number, but in order to cut the variance in half, you'd need to bump the number of hands to 500,000.

One reason this accuracy is important is that in the later generations, the differences between candidates are very small. Evolution has caused the main parts of the strategy to converge on a particular approach, and towards the end all it's doing is refining the minor details. In those cases it's important to accurately determine the difference between two similar candidates.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='80'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='969' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#representation)Representation

*Representation* is simply the idea that we need to use a data structure for a candidate solution that can be combined via crossover, and possibly mutated.

In this case, that's also quite simple because the way that human beings represent a Blackjack strategy is to use three tables, as we've seen. Representing those in code with three two-dimensional arrays is the obvious approach.

Each cell in those three tables will have "Hit", "Stand", "Double-Down", or (only for pairs) "Split".

By the way, since there are 160 cells in the hard hands table, and 80 cells in the soft hands table, and 100 cells in the pairs table, we can calculate exactly how many possible distinct strategies there are for Blackjack:

4100 x 380 x 3160 = 5 x 10174 possible Blackjack strategies

That's a big number, which is obviously impossible to search using brute force. Genetic algorithms (GAs) are extremely helpful when trying to find an optimal solution from a very large set of possible solutions like this.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='81'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='979' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#blackjack-rules-and-strategies)Blackjack Rules and Strategies

The [rules of Blackjack](https://en.wikipedia.org/wiki/Blackjack) are fairly simple. The dealer and the player both are dealt two cards. The player sees both of their cards (they are usually dealt face up), and one of the dealer's cards is dealt face up.

Each card has a value - for cards between 2 and 10, the value is the same as the card's rank (so an Eight of Spades counts as 8, for example). All face cards count as 10, and an Ace can either be 1 or 11 (it counts as 11 only when that does not result in a hand that exceeds 21). The suit of a card does not matter.

After the cards are dealt, if the player has Blackjack (a total of 21) and the dealer does not, the player is immediately paid 1.5 times their original bet, and a new hand is dealt. If the player has 21 and the dealer does also, then it's a tie and the player gets their original bet back, and a new hand is dealt.

If the player wasn't dealt a Blackjack, then play continues with the player deciding whether to Stand (not get any more cards), Hit (receive an additional card), Double-down (place an additional bet, and receive one and only one more card), or, in the case of holding a pair, splitting the hand, which means placing an additional bet and receiving two new cards, so the end result is that the player is now playing two (or, in the case of multiple splits, more than two) hands simultaneously.

If the player hits or double-downs and has a resulting hand that exceeds 21, then they lose and play continues with the next hand. If not, then the dealer draws until their hand totals at least 17. If the dealer exceeds 21 at this point, the player receives a payment equal to twice their original bet. If the dealer doesn't exceed 21, then the hands are compared and the player with the highest total that doesn't exceed 21 wins.

Because of these rules, certain effective strategies emerge. One common strategy is that if you hold a hard hand with a value of 20, 19 or 18, you should Stand, since you avoid busting by going over 21, and you have a nice hand total that might win in a showdown with the dealer.

Another common strategy is to split a pair of Aces, since Aces are so powerful (due to the fact that count as 11 or 1, you can often Hit a hand with a soft Ace with no risk of busting). Likewise, splitting a pair of 8s is a good idea because with a hard total of 16, it's likely you will bust if you take a Hit (since so many cards count as 10).

As a human being, all it takes is a little knowledge about the rules in order to construct a strategy. The GA program doesn't have that advantage, and operates completely without any pre-programmed knowledge of Blackjack. It simply uses the relative fitness scores and the mechanism of evolution to find the solution.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='82'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='990' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#ga-settings)GA Settings

There are many variables or settings for a GA. You can adjust population size, how parent candidates are selected, how the resulting children may be mutated, and several other items. The following sections describe some of these settings:

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='83'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='993' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#setting-selection-style)Setting: Selection Style

Once we've solved representation and have a fitness function, the next step is to select two candidates for crossover during the process of building a new generation.

There are three common styles for selection, and this program supports all of them.

First, you can choose `Roulette Wheel` selection. It's named for a Roulette wheel because you can imagine each candidate's fitness score being a wedge in a pie chart, with a size proportionate to its relative fitness compared to the other candidates. (Of course, this assumes that all fitness scores are positive, which we will talk about shortly).

The main benefit of Roulette Wheel selection is that selection is fitness-proportionate. Imagine if you had only three candidates, with fitness scores of 1, 3, and 8. The relative selection probabilities for those candidates will be 1/12, 3/12, and 8/12.

The downside of Roulette Wheel selection is that it tends to be somewhat slow in terms of processing. The selection process is done by iterating through the candidates until a particular condition is matched - in other words, O(N) performance.

Another potential problem with Roulette Wheel selection is that there may be situations where fitness scores vary widely, to such an extent that only certain candidates have any reasonable chance of being selected. This happens frequently in early generations, since the majority of candidates are mostly random.

Although this might sound like a positive (since you ultimately want to select candidates with high fitness scores), it also results in a loss of genetic diversity. In other words, even though a particular candidate may have a low fitness score in an early generation, it may contain elements that are needed to find the ultimate solution in later generations.

`Ranked Selection` is the solution to this problem. Instead of using raw fitness scores during the selection process, the candidates are sorted by fitness, with the worst candidate receiving a score of 0, the second worse receiving 1, and so forth, all the way to the best candidate, which has a score equal to the population size - 1.

Ranked Selection is quite slow, since it combines the O(N) performance of Roulette Wheel, with the additional requirement that the candidates be sorted before selection. However, there may be circumstances where it performs better than other selection approaches.

Finally, the fastest selection method of all is called `Tournament Selection`. This method simply selects N random candidates from the current generation, and then uses the one with the best fitness score.

A tournament size of 2 means two random candidates are selected, and the best of those two is used. If you have a large tournament size (like 10), then 10 different candidates will be selected, with the best of those being the ultimate selection. That obviously tilts the balance between randomness and quality.

Tournament selection works well in most cases, but it does require some experimentation to find the best tourney size.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='84'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1007' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#setting-elitism)Setting: Elitism

*Elitism* is a technique that helps ensure that the best candidates are always maintained.

Since all selection methods are random to some degree, it is possible to completely lose the best candidates from one generation to another. By using Elitism, we automatically advance a certain percentage of the best candidates to the next generation.

Elitism does have a negative impact on performance since all of the candidates must be sorted by fitness score.

Typically Elitism is done before filling the rest of a new generation with new candidates created by crossover.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='85'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1014' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#crossover-details)Crossover Details

Once two candidate solutions have been selected, the next step in building a new generation is to combine those two into a single new candidate, hopefully using the best of both parent strategies.

There are a number of ways to do crossover, but the method used in this program is quite straightforward - the two fitness scores are compared, and crossover happens in a relatively proportionate way. If one candidate has a fitness of 10, and the other has a fitness of 5, then the one with fitness 10 contributes twice as much to the child as the parent with a fitness of 5.

Since the fitness scores in this program are based on how much the strategy would win over thousands of hands, almost all fitness scores will be negative. (This is obviously because the rules are set up so the house always wins.)

This makes it difficult to calculate relative fitnesses (how do you compare a positive number with a negative, and find relative proportions?), and also causes problems with selection methods like Roulette Wheel or Ranked.

To solve this, we find the lowest fitness score of the generation and add that value to each candidate. This results in an adjusted fitness score of 0 for the very worse candidate, so it never gets selected.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='86'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1021' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#mutation)Mutation

As has been mentioned a few times, maintaining genetic diversity in our population of candidate solutions is a good thing. It helps the GA ultimately find the very best solution, by occasionally altering a candidate in a positive direction.

There are two settings for mutation. `MutationRate` controls what percentage of new candidates have mutation done on them. `MutationImpact` controls what percentage of their strategy is randomized.

### [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='87'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1025' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#population-size)Population Size

Population size has a significant impact on performance. The smaller the population size, the faster the GA will execute. On the other hand, if the size is too low the population may not have enough genetic diversity to find the ultimate solution. During testing, it looks like 700 to 1000 is a good balance between speed and correctness.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='88'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1029' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#performance-notes)Performance Notes

This program consumes a lot of processing power. Running tests of hundreds of thousands of hands of Blackjack for hundreds or thousands of candidates consumes a lot of time. It's really imperative to write the code so that it works as efficiently as possible. If your CPU isn't consistently at or above 95% usage, there's still room for improvement.

Multi-threading is a natural fit for genetic algorithms because we often want to perform the same action on each candidate. The best example of this is when we calculate fitness scores. This is often an operation that takes quite a bit of time. In our case, we're dealing out 100,000 hands, and each hand has to be played until the end. If we're single-threading that code, it's going to take a long time. Multi-threading is really the way to go.

Luckily, there's a ridiculously simple way to efficiently use all of your processors for an operation like this. This code loops over all of the candidates in the currentGeneration list, calls the fitness function and sets the fitness property for each:

Parallel.ForEach(currentGeneration, (candidate) =>{ candidate.Fitness  =  FitnessFunction(candidate);

});

Regardless of the number of items in the list or the number of processors on your machine, the code will efficiently run the code in a multi-threaded manner, and continue only when all of the threads are complete.

One of the side effects of making this code multi-threaded is that all of the code relating to evaluating a candidate must be thread-safe, including any Singleton objects. When making code thread-safe, pay attention that you don't accidentally introduce code that will slow your program down unintentionally, because sometimes it can be quite subtle.

Random numbers are central to how genetic algorithms work, so it's critical that they can be used correctly from a multithreaded environment. That means that each random number generator must be separate from the others, and it also means that each must produce a distinct series of random numbers.

Random number generators use seed values which are usually time-based, like the number of milliseconds the computer has been turned on. Starting with that seed, subsequent calls will return a series of numbers that look random, but really aren't. If you start with the same seed, you get the same sequence.

And that's a problem because if you create multiple random number generator objects in a loop using the default time-based seed, several of them will have the same time-based initial seed value, which will result in the same sequence of "random" numbers. That's a bug, because it can reduce the true randomness of the program a great deal, and that's vital to a genetic algorithm.

There are a couple of ways to solve this problem. First, you can make the random object truly a singleton, and restrict access to it by using a C# `lock` statement. The makes all access serialized for any random number need, which reduces performance.

Another approach is to make the variable static per thread. By declaring the variable as `static` and also marking it with the `[ThreadStatic]` attribute, the .NET runtime allocates one static variable per thread. That eliminates the locking/serialization, but also has performance issues.

The approach used in this application is to use a non-default seed value. In this case we call `Guid.NewGuid().GetHashCode()`, which generates a new, unique GUID, then gets an integer hashcode value that should be unique, depending on how `GetHashCode` is implemented.

While multithreading really helps performance, there are also other things we can do to improve performance. For example, when dealing with large populations, the hundreds or thousands of objects that will be generated each generation can quickly turn into a huge problem related to garbage collection.

In the end, the easiest way to solve that is to look through the code and find objects being allocate inside a loop. It's better to declare the variable outside of the loop, and then clear it in the loop, rather than reallocate it. In a program like this one where you could be looping hundreds of thousands of times, this can result in a very significant performance boost.

For example, in an early version of this code, a Deck object was created for each hand. Since there are hundreds of candidate solutions running hundreds of thousands of trial hands, this was a huge inefficiency. The code was changed to allocate one deck per test sequence. The deck was shuffled as needed, so it never needs to be reallocated.

Beyond the cards in the deck, another object type that was repeatedly created and destroyed were the candidate strategies. To mitigate this problem, a StrategyPool class was created that handles allocation and deallocation. This means that strategy objects are reused, rather than dynamically created when needed. The pool class has to be thread-safe, so it does serialize access to its methods via a C# lock statement, but overall using the pool approach produced a good performance increase.

Finally, a subtle form of object allocation is conversion. In an early version of the code, a utility card function used `Convert.ToInt32(rankEnum)`. Obviously, the easiest way to convert from an enum to an int is simply to cast it, like `(int)rankEnum`. But it's hard to know exactly what the difference is between that approach, `int.Parse()`, `int.TryParse()`, or `Convert.ToInt32()`, since they can all be used and are roughly equivalent.

Perhaps the compiler was boxing the enum value before passing it to `Convert.ToInt32()`, because the profiler identified this as a function that had large amounts of thread contention waiting - and the problem got much, much worse as the generations passed. By rewriting the conversion to use a simple cast, the program performance increased threefold (3x).

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='89'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1050' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#contributing)Contributing

Please read [CONTRIBUTING.md](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/CONTRIBUTING.md) for details on our code of conduct, and the process for submitting pull requests to us.

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='90'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1053' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#author)Author

- **Greg Sommerville** - *Initial work*

## [![](data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-link js-evernote-checked' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true' data-evernote-id='91'%3e%3cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z' data-evernote-id='1058' class='js-evernote-checked'%3e%3c/path%3e%3c/svg%3e)](https://github.com/GregSommerville/machine-learning-blackjack-solution#license)License

This project is licensed under the Apache 2.0 License - see the [LICENSE.md](https://github.com/GregSommerville/machine-learning-blackjack-solution/blob/master/LICENSE.md) file for details