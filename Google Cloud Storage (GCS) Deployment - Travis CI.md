Google Cloud Storage (GCS) Deployment - Travis CI

### Getting Started

- [Getting started](https://docs.travis-ci.com/user/getting-started/)

- [Customizing Your Build](https://docs.travis-ci.com/user/customizing-the-build/)

- [Common Build Problems](https://docs.travis-ci.com/user/common-build-problems/)

- [Speeding up the Build](https://docs.travis-ci.com/user/speeding-up-the-build/)

- [Using Docker in your Build](https://docs.travis-ci.com/user/docker/)

- [Headless Testing with Browsers](https://docs.travis-ci.com/user/gui-and-headless-browsers/)

- [Building Pull Requests](https://docs.travis-ci.com/user/pull-requests/)

- [Cron Jobs](https://docs.travis-ci.com/user/cron-jobs/)

- [Travis CI for Private Projects](https://docs.travis-ci.com/user/travis-pro/)

- [Command Line Client](https://github.com/travis-ci/travis#readme)

- [Validating .travis.yml files](https://docs.travis-ci.com/user/travis-lint/)

### Installing Dependencies

- [Installing Dependencies](https://docs.travis-ci.com/user/installing-dependencies/)

- [Private Dependencies](https://docs.travis-ci.com/user/private-dependencies/)

- [Setting up Services and Databases](https://docs.travis-ci.com/user/database-setup/)

- [Caching Dependencies](https://docs.travis-ci.com/user/caching/)

- [Adding to SSH Known Hosts](https://docs.travis-ci.com/user/ssh-known-hosts/)

### Programming Languages

- [Android](https://docs.travis-ci.com/user/languages/android/)

- [C](https://docs.travis-ci.com/user/languages/c/)

- [C#](https://docs.travis-ci.com/user/languages/csharp/)

- [C++](https://docs.travis-ci.com/user/languages/cpp/)

- [Clojure](https://docs.travis-ci.com/user/languages/clojure/)

- [Crystal](https://docs.travis-ci.com/user/languages/crystal/)

- [D](https://docs.travis-ci.com/user/languages/d/)

- [Dart](https://docs.travis-ci.com/user/languages/dart/)

- [Erlang](https://docs.travis-ci.com/user/languages/erlang/)

- [Elixir](https://docs.travis-ci.com/user/languages/elixir/)

- [F#](https://docs.travis-ci.com/user/languages/csharp/)

- [Go](https://docs.travis-ci.com/user/languages/go/)

- [Groovy](https://docs.travis-ci.com/user/languages/groovy/)

- [Haskell](https://docs.travis-ci.com/user/languages/haskell/)

- [Haxe](https://docs.travis-ci.com/user/languages/haxe/)

- [Java](https://docs.travis-ci.com/user/languages/java/)

- [JavaScript (with Node.js)](https://docs.travis-ci.com/user/languages/javascript-with-nodejs/)

- [Julia](https://docs.travis-ci.com/user/languages/julia/)

- [Objective-C](https://docs.travis-ci.com/user/languages/objective-c/)

- [Perl](https://docs.travis-ci.com/user/languages/perl/)

- [Perl6](https://docs.travis-ci.com/user/languages/perl6/)

- [PHP](https://docs.travis-ci.com/user/languages/php/)

- [Python](https://docs.travis-ci.com/user/languages/python/)

- [R](https://docs.travis-ci.com/user/languages/r/)

- [Ruby](https://docs.travis-ci.com/user/languages/ruby/)

- [Rust](https://docs.travis-ci.com/user/languages/rust/)

- [Scala](https://docs.travis-ci.com/user/languages/scala/)

- [Smalltalk](https://docs.travis-ci.com/user/languages/smalltalk/)

- [Visual Basic](https://docs.travis-ci.com/user/languages/csharp/)

- [Adding a language](https://docs.travis-ci.com/user/languages/community-supported-languages/)

### Deployments and Uploads

- [Overview](https://docs.travis-ci.com/user/deployment/)

- [anynines](https://docs.travis-ci.com/user/deployment/anynines/)

- [Appfog](https://docs.travis-ci.com/user/deployment/appfog/)

- [Atlas](https://docs.travis-ci.com/user/deployment/atlas/)

- [AWS CodeDeploy](https://docs.travis-ci.com/user/deployment/codedeploy/)

- [AWS Elastic Beanstalk](https://docs.travis-ci.com/user/deployment/elasticbeanstalk/)

- [AWS Lambda](https://docs.travis-ci.com/user/deployment/lambda/)

- [AWS OpsWorks](https://docs.travis-ci.com/user/deployment/opsworks/)

- [Azure Web Apps](https://docs.travis-ci.com/user/deployment/azure-web-apps/)

- [bintray](https://docs.travis-ci.com/user/deployment/bintray/)

- [BitBalloon](https://docs.travis-ci.com/user/deployment/bitballoon/)

- [Bluemix CloudFoundry](https://docs.travis-ci.com/user/deployment/bluemixcloudfoundry/)

- [Boxfuse](https://docs.travis-ci.com/user/deployment/boxfuse/)

- [Catalyze](https://docs.travis-ci.com/user/deployment/catalyze/)

- [Chef Supermarket](https://docs.travis-ci.com/user/deployment/chefsupermarket)

- [Cloud 66](https://docs.travis-ci.com/user/deployment/cloud66/)

- [CloudFoundry](https://docs.travis-ci.com/user/deployment/cloudfoundry/)

- [Deis](https://docs.travis-ci.com/user/deployment/deis/)

- [Engine Yard](https://docs.travis-ci.com/user/deployment/engineyard/)

- [GitHub Pages](https://docs.travis-ci.com/user/deployment/pages/)

- [GitHub Releases](https://docs.travis-ci.com/user/deployment/releases/)

- [Google App Engine](https://docs.travis-ci.com/user/deployment/google-app-engine/)

- [Google Cloud Storage](https://docs.travis-ci.com/user/deployment/gcs/)

- [Google Firebase](https://docs.travis-ci.com/user/deployment/firebase/)

- [Hackage](https://docs.travis-ci.com/user/deployment/hackage/)

- [Heroku](https://docs.travis-ci.com/user/deployment/heroku/)

- [Launchpad](https://docs.travis-ci.com/user/deployment/launchpad/)

- [Modulus](https://docs.travis-ci.com/user/deployment/modulus/)

- [npm](https://docs.travis-ci.com/user/deployment/npm/)

- [OpenShift](https://docs.travis-ci.com/user/deployment/openshift/)

- [packagecloud.io](https://docs.travis-ci.com/user/deployment/packagecloud/)

- [Puppet Forge](https://docs.travis-ci.com/user/deployment/puppetforge/)

- [PyPI](https://docs.travis-ci.com/user/deployment/pypi/)

- [Rackspace Cloud Files](https://docs.travis-ci.com/user/deployment/cloudfiles/)

- [RubyGems](https://docs.travis-ci.com/user/deployment/rubygems/)

- [Scalingo](https://docs.travis-ci.com/user/deployment/scalingo/)

- [Script](https://docs.travis-ci.com/user/deployment/script/)

- [Surge.sh](https://docs.travis-ci.com/user/deployment/surge/)

- [S3](https://docs.travis-ci.com/user/deployment/s3/)

- [TestFairy](https://docs.travis-ci.com/user/deployment/testfairy/)

- [Uploading Build Artifacts](https://docs.travis-ci.com/user/uploading-artifacts/)

### CI Environment Reference

- [CI Environment Reference](https://docs.travis-ci.com/user/ci-environment/)

- [OSX CI Environment Reference](https://docs.travis-ci.com/user/osx-ci-environment/)

- [Trusty CI Environment](https://docs.travis-ci.com/user/trusty-ci-environment/)

-

- [Environment Variables](https://docs.travis-ci.com/user/environment-variables/)

- [Building on Multiple Operating Systems](https://docs.travis-ci.com/user/multi-os/)

- [Migrating to Container-Based Infrastructure](https://docs.travis-ci.com/user/migrating-from-legacy/)

- [Build Environment Updates](https://docs.travis-ci.com/user/build-environment-updates/)

### Encrypting Files and Data

- [Encrypting Sensitive Data](https://docs.travis-ci.com/user/encryption-keys/)

- [Encrypting Files](https://docs.travis-ci.com/user/encrypting-files/)

- [GitHub Permissions used by Travis CI](https://docs.travis-ci.com/user/github-oauth-scopes/)

### Integrations and Notifications

- [Configuring Notifications](https://docs.travis-ci.com/user/notifications/)

- [Showing Build Status Images](https://docs.travis-ci.com/user/status-images/)

- [Code Climate](https://docs.travis-ci.com/user/code-climate/)

- [Coveralls](https://docs.travis-ci.com/user/coveralls/)

- [Coverity Scan](https://docs.travis-ci.com/user/coverity-scan/)

- [BrowserStack](https://docs.travis-ci.com/user/browserstack/)

- [Sauce Labs](https://docs.travis-ci.com/user/sauce-connect/)

- [SonarQube.com](https://docs.travis-ci.com/user/sonarqube/)

- [SourceClear](https://docs.travis-ci.com/user/sourceclear/)

- [Atom Feeds](https://docs.travis-ci.com/user/build-feeds/)

- [CCMenu / CCTray Feeds](https://docs.travis-ci.com/user/cc-menu/)

- [Embedded Builds with PlatformIO](https://docs.travis-ci.com/user/integration/platformio/)

### Developer Program

- [The API](https://docs.travis-ci.com/api)

- [The Ruby Library](https://github.com/travis-ci/travis#ruby-library)

- [Triggering Builds through the API](https://docs.travis-ci.com/user/triggering-builds/)

### 3rd Party Tools and Resources

- [Apps, Clients and Tools](https://docs.travis-ci.com/user/apps/)

- [Coverity Scan](https://scan.coverity.com/travis_ci)

This documentation site is open source. The [README in our Git repository](https://github.com/travis-ci/docs-travis-ci-com) explains how to contribute.

[Improve this page on GitHub](https://github.com/travis-ci/docs-travis-ci-com/edit/gh-pages/user/deployment/gcs.md)

# Google Cloud Storage (GCS) Deployment

Travis CI supports uploading to Google Cloud Storage (GCS).
A minimal configuration is:

	deploy:
	  provider: gcs
	  access_key_id: "GCS Interoperable Access Key ID"
	  secret_access_key: "GCS Interoperable Access Secret"
	  bucket: "GCS Bucket"

This example is almost certainly not ideal, as you probably want to upload your built binaries and documentation. Set `skip_cleanup` to `true` to prevent Travis CI from deleting your build artifacts.

	deploy:
	  provider: gcs
	  access_key_id: "GCS Interoperable Access Key ID"
	  secret_access_key: "GCS Interoperable Access Secret"
	  bucket: "GCS Bucket"
	  skip_cleanup: true

You can find your GCS Interoperable Access Keys [here](https://developers.google.com/storage/docs/migrating). It is recommended to encrypt that key. Assuming you have the Travis CI command line client installed, you can do it like this:

	travis encrypt --add deploy.secret_access_key

You will be prompted to enter your api key on the command line.
You can also have the `travis` tool set up everything for you:

	$ travis setup gcs

Keep in mind that the above command has to run in your project directory, so it can modify the `.travis.yml` for you.

### GCS ACL via option [#](https://docs.travis-ci.com/user/deployment/gcs/#GCS-ACL-via-option)

You can set the acl of your uploaded files via the `acl` option like this:

	deploy:
	  provider: gcs
	  access_key_id: "GCS Interoperable Access Key ID"
	  secret_access_key: "GCS Interoperable Access Secret"
	  bucket: "GCS Bucket"
	  skip_cleanup: true
	  acl: public-read

Valid ACL values are: `private`, `public-read`, `public-read-write`, `authenticated-read`, `bucket-owner-read`, `bucket-owner-full-control`. The ACL defaults to `private`. See the [full documentation on Google Cloud](https://cloud.google.com/storage/docs/reference-headers#xgoogacl).

### Conditional releases [#](https://docs.travis-ci.com/user/deployment/gcs/#Conditional-releases)

You can deploy only when certain conditions are met. See [Conditional Releases with `on:`](https://docs.travis-ci.com/user/deployment#Conditional-Releases-with-on%3A).

### Setting `Content-Encoding` header [#](https://docs.travis-ci.com/user/deployment/gcs/#Setting-Content-Encoding-header)

GCS uploads can optionally set HTTP header `Content-Encoding`. This header allows files to be sent compressed while retaining file extensions and the associated MIME types.

To enable this feature, add:

	deploy:
	  provider: gcs
	  ...
	  detect_encoding: true # <== default is false

If the file is compressed with `gzip` or `compress`, it will be uploaded with the appropriate header.

### HTTP cache control [#](https://docs.travis-ci.com/user/deployment/gcs/#HTTP-cache-control)

GCS uploads can optionally set the `Cache-Control` HTTP header.

Set HTTP header `Cache-Control` to suggest that the browser cache the file. Defaults to `no-cache`. Valid options are `no-cache`, `no-store`, `max-age=<seconds>`, `s-maxage=<seconds> no-transform`, `public`, `private`.

	deploy:
	  provider: gcs
	  ...
	  cache_control: "max-age=31536000"

See the [full documentation on Google Cloud](https://cloud.google.com/storage/docs/reference-headers#cachecontrol).